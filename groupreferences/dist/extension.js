(()=>{"use strict";var e={103:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TreeProvider=t.NodeItem=void 0;const n=i(496);class r extends n.TreeItem{constructor(e){if(super(e.name,e.isFile?n.TreeItemCollapsibleState.Expanded:n.TreeItemCollapsibleState.None),this.info=e,0==e.isFile){const t={preserveFocus:!1,preview:!1,selection:e.range};this.command={command:"vscode.open",title:"标题",arguments:[e.uri,t]}}else this.iconPath=n.ThemeIcon.File,this.resourceUri=e.uri,this.description=e.uri.fsPath,this.tooltip=e.uri.fsPath}}t.NodeItem=r,t.TreeProvider=class{constructor(e){this.refreshEvent=new n.EventEmitter,this.onDidChangeTreeData=this.refreshEvent.event,this.dataSources=[],this._isWriteTree=!1,this._isWriteTree=e}refresh(){this.refreshEvent?.fire(null)}getTreeItem(e){return new r(e)}getChildren(e){if(0==this.dataSources.length)return null;if(e){if(0==e.isFile)return null;let t=[];for(let i=0;i<this.dataSources.length;i++){let n=this.dataSources[i],r=n.loc,o=r.uri;if(this._isWriteTree){if(!n.isWrite)continue}else if(1==n.isWrite)continue;if(o.toString()!=e.uri.toString())continue;let s=n.lineText;n.lineText=n.lineText.trimStart();let a=s.length-n.lineText.length,c={uri:o,name:{label:n.lineText,highlights:[[r.range.start.character-a,r.range.end.character-a]]},isFile:!1,line:r.range.start.line,range:r.range};t.push(c)}return t.sort(((e,t)=>(e.line=e.line?e.line:0,t.line=t.line?t.line:0,e.line-t.line))),t}{let e=[];var t=new Set;for(let i=0;i<this.dataSources.length;i++){let n=this.dataSources[i],r=n.loc.uri;if(this._isWriteTree){if(!n.isWrite)continue}else if(1==n.isWrite)continue;if(t.has(r.toString()))continue;let o={uri:r,name:this.getFileNameByPath(r.path),isFile:!0};t.add(r.toString()),e.push(o)}return e}}setDataSources(e){this.dataSources=e,this.refresh()}getFileNameByPath(e){let t=e.lastIndexOf("\\");return-1==t&&(t=e.lastIndexOf("/")),-1!=t?e.substring(t+1):e}}},599:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.decodeLocation=t.encodeLocation=t.Provider=void 0;const n=i(496),r=i(938);class o{constructor(){var e=this;this._onDidChange=new n.EventEmitter,this._documents=new Map,this._editorDecoration=n.window.createTextEditorDecorationType({textDecoration:"underline"}),this._subscriptions=n.workspace.onDidCloseTextDocument((function(t){return e._documents.delete(t.uri.toString())}))}dispose(){this._subscriptions.dispose(),this._documents.clear(),this._editorDecoration.dispose(),this._onDidChange.dispose()}get onDidChange(){return this._onDidChange.event}provideTextDocumentContent(e){var t=this,i=this._documents.get(e.toString());if(i)return i.value;var s=a(e),c=s[0],l=s[1];return n.commands.executeCommand("vscode.executeReferenceProvider",c,l).then((i=>{var n=i,s=0;n.sort(o._compareLocations).find((function(e,t){return e.uri.toString()===c.toString()&&(s=t)&&!0})),n.push.apply(n,n.splice(0,s));var a=new r.ReferencesDocument(e,n,t._onDidChange);return t._documents.set(e.toString(),a),a.value}))}static _compareLocations(e,t){return e.uri.toString()<t.uri.toString()?-1:e.uri.toString()>t.uri.toString()?1:e.range.start.compareTo(t.range.start)}provideDocumentLinks(e,t){var i=this._documents.get(e.uri.toString());if(i)return i.links}}t.Provider=o,o.scheme="references";var s=0;function a(e){var t=JSON.parse(e.query),i=t[0],r=t[1],o=t[2];return[n.Uri.parse(i),new n.Position(r,o)]}t.encodeLocation=function(e,t){var i=JSON.stringify([e.toString(),t.line,t.character]);return n.Uri.parse(o.scheme+":References.locations?"+i+"#"+s++)},t.decodeLocation=a},938:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ReferencesDocument=void 0;const n=i(496);t.ReferencesDocument=class{constructor(e,t,i){this._uri=e,this._locations=t,this._emitter=i,this._lines=["Found "+this._locations.length+" references"],this._links=[],this._join=this._populate()}get value(){return this._lines.join("\n")}get links(){return this._links}join(){return this._join}_populate(){var e=this;if(0!==this._locations.length)return new Promise((function(t){var i=0,n=function(){if(i>=e._locations.length)t(e);else{for(var r=e._locations[i],o=r.uri,s=[r.range];++i<e._locations.length&&(r=e._locations[i]).uri.toString()===o.toString();)s.push(r.range);e._fetchAndFormatLocations(o,s).then((function(t){e._emitter.fire(e._uri),n()}))}};n()}))}_fetchAndFormatLocations(e,t){var i=this;return n.workspace.openTextDocument(e).then((function(n){i._lines.push("",e.toString());for(var r=0;r<t.length;r++){var o=t[r].start.line;i._appendLeading(n,o,t[r-1]),i._appendMatch(n,o,t[r],e),i._appendTrailing(n,o,t[r+1])}}),(function(t){i._lines.push("","Failed to load '"+e.toString()+"'\n\n"+String(t),"")}))}_appendLeading(e,t,i){for(var n=Math.max(0,t-3,i&&i.end.line||0);++n<t;){var r=e.lineAt(n).text;this._lines.push("  "+(n+1)+(r&&"  "+r))}}_appendMatch(e,t,i,r){var o=e.lineAt(t).text,s="  "+(t+1)+": ",a=this._lines.push(s+o),c=new n.Range(a-1,s.length+i.start.character,a-1,s.length+i.end.character),l=r.with({fragment:String(1+i.start.line)});this._links.push(new n.DocumentLink(c,l))}_appendTrailing(e,t,i){var n=Math.min(e.lineCount,t+3);if(!(i&&i.start.line-n<=2)){for(;++t<n;){var r=e.lineAt(t).text;this._lines.push("  "+(t+1)+(r&&"  "+r))}i&&this._lines.push("  ...")}}}},496:e=>{e.exports=require("vscode")}},t={};function i(n){var r=t[n];if(void 0!==r)return r.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,i),o.exports}var n={};(()=>{var e=n;Object.defineProperty(e,"__esModule",{value:!0}),e.deactivate=e.activate=void 0;const t=i(496),r=i(103),o=i(599);e.activate=function(e){console.log('Congratulations, your extension "groupreferences" is now active!');const i=new r.TreeProvider(!1);t.window.registerTreeDataProvider("sidebar_groupreferences_id1",i);const n=new r.TreeProvider(!0);t.window.registerTreeDataProvider("sidebar_groupreferences_id2",n);var s=t.commands.registerTextEditorCommand("groupreferences.findAllReferences",(function(e){var r=(0,o.encodeLocation)(e.document.uri,e.selection.active),s=(0,o.decodeLocation)(r),a=s[0],c=s[1];return t.commands.executeCommand("workbench.view.extension.sidebar_groupreferences"),t.commands.executeCommand("vscode.executeReferenceProvider",a,c).then((e=>{let r=function(e){let t=[];for(let i=0;i<e.length;i++){const n={loc:e[i],lineText:""};t.push(n)}return t}(e);(function(e){return new Promise(((i,n)=>{let r=0;for(let n=0;n<e.length;n++){let o=e[n],s=o.loc,a=s.uri;o.isWrite=!1,t.workspace.openTextDocument(a).then((n=>{if(o.lineText=n.lineAt(s.range.start.line).text,o.lineText.startsWith("import "))return o.isWrite=!1,r++,void(r>=e.length&&i&&i(null));t.commands.executeCommand("vscode.executeDocumentHighlights",a,s.range.start).then((n=>{let a=n;for(let e=0;e<a.length;e++){const i=a[e];s.range.isEqual(i.range)&&(i.kind===t.DocumentHighlightKind.Write?o.isWrite=!0:i.kind===t.DocumentHighlightKind.Read&&(o.isWrite=!1))}r++,r>=e.length&&i&&i(null)}))}))}}))})(r).then((()=>{i.setDataSources(r),n.setDataSources(r)}))}))}));e.subscriptions.push(s)},e.deactivate=function(){}})(),module.exports=n})();
(()=>{"use strict";var e={103:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TreeProvider=t.NodeItem=void 0;const i=n(496);class r extends i.TreeItem{constructor(e){if(super(e.name,e.isFile?i.TreeItemCollapsibleState.Expanded:i.TreeItemCollapsibleState.None),this.info=e,0==e.isFile){const t={preserveFocus:!1,preview:!1,selection:e.range};this.command={command:"vscode.open",title:"标题",arguments:[e.uri,t]}}else this.iconPath=i.ThemeIcon.File,this.description=e.uri.fsPath,this.tooltip=e.uri.fsPath}}t.NodeItem=r,t.TreeProvider=class{constructor(e){this.refreshEvent=new i.EventEmitter,this.onDidChangeTreeData=this.refreshEvent.event,this.dataSources=[],this._isWriteTree=!1,this._isWriteTree=e}Refresh(){this.refreshEvent?.fire(null)}getTreeItem(e){return new r(e)}getChildren(e){if(0==this.dataSources.length)return null;if(e){if(0==e.isFile)return null;let t=[];for(let n=0;n<this.dataSources.length;n++){let i=this.dataSources[n],r=i.loc,o=r.uri;if(this._isWriteTree){if(!i.isWrite)continue}else if(1==i.isWrite)continue;if(o.toString()!=e.uri.toString())continue;let s={uri:o,name:{label:i.lineText,highlights:[[r.range.start.character,r.range.end.character]]},isFile:!1,line:r.range.start.line,range:r.range};t.push(s)}return t.sort(((e,t)=>(e.line=e.line?e.line:0,t.line=t.line?t.line:0,e.line-t.line))),t}{let e=[];var t=new Set;for(let n=0;n<this.dataSources.length;n++){let i=this.dataSources[n],r=i.loc.uri;if(this._isWriteTree){if(!i.isWrite)continue}else if(1==i.isWrite)continue;if(t.has(r.toString()))continue;let o={uri:r,name:this.getFileNameByPath(r.path),isFile:!0};t.add(r.toString()),e.push(o)}return e}}SetDataSources(e){this.dataSources=e,this.Refresh()}getFileNameByPath(e){let t=e.lastIndexOf("\\");return-1==t&&(t=e.lastIndexOf("/")),-1!=t?e.substring(t+1):e}}},599:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.decodeLocation=t.encodeLocation=t.Provider=void 0;const i=n(496),r=n(938);class o{constructor(){var e=this;this._onDidChange=new i.EventEmitter,this._documents=new Map,this._editorDecoration=i.window.createTextEditorDecorationType({textDecoration:"underline"}),this._subscriptions=i.workspace.onDidCloseTextDocument((function(t){return e._documents.delete(t.uri.toString())}))}dispose(){this._subscriptions.dispose(),this._documents.clear(),this._editorDecoration.dispose(),this._onDidChange.dispose()}get onDidChange(){return this._onDidChange.event}provideTextDocumentContent(e){var t=this,n=this._documents.get(e.toString());if(n)return n.value;var s=a(e),c=s[0],u=s[1];return i.commands.executeCommand("vscode.executeReferenceProvider",c,u).then((n=>{var i=n,s=0;i.sort(o._compareLocations).find((function(e,t){return e.uri.toString()===c.toString()&&(s=t)&&!0})),i.push.apply(i,i.splice(0,s));var a=new r.ReferencesDocument(e,i,t._onDidChange);return t._documents.set(e.toString(),a),a.value}))}static _compareLocations(e,t){return e.uri.toString()<t.uri.toString()?-1:e.uri.toString()>t.uri.toString()?1:e.range.start.compareTo(t.range.start)}provideDocumentLinks(e,t){var n=this._documents.get(e.uri.toString());if(n)return n.links}}t.Provider=o,o.scheme="references";var s=0;function a(e){var t=JSON.parse(e.query),n=t[0],r=t[1],o=t[2];return[i.Uri.parse(n),new i.Position(r,o)]}t.encodeLocation=function(e,t){var n=JSON.stringify([e.toString(),t.line,t.character]);return i.Uri.parse(o.scheme+":References.locations?"+n+"#"+s++)},t.decodeLocation=a},938:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ReferencesDocument=void 0;const i=n(496);t.ReferencesDocument=class{constructor(e,t,n){this._uri=e,this._locations=t,this._emitter=n,this._lines=["Found "+this._locations.length+" references"],this._links=[],this._join=this._populate()}get value(){return this._lines.join("\n")}get links(){return this._links}join(){return this._join}_populate(){var e=this;if(0!==this._locations.length)return new Promise((function(t){var n=0,i=function(){if(n>=e._locations.length)t(e);else{for(var r=e._locations[n],o=r.uri,s=[r.range];++n<e._locations.length&&(r=e._locations[n]).uri.toString()===o.toString();)s.push(r.range);e._fetchAndFormatLocations(o,s).then((function(t){e._emitter.fire(e._uri),i()}))}};i()}))}_fetchAndFormatLocations(e,t){var n=this;return i.workspace.openTextDocument(e).then((function(i){n._lines.push("",e.toString());for(var r=0;r<t.length;r++){var o=t[r].start.line;n._appendLeading(i,o,t[r-1]),n._appendMatch(i,o,t[r],e),n._appendTrailing(i,o,t[r+1])}}),(function(t){n._lines.push("","Failed to load '"+e.toString()+"'\n\n"+String(t),"")}))}_appendLeading(e,t,n){for(var i=Math.max(0,t-3,n&&n.end.line||0);++i<t;){var r=e.lineAt(i).text;this._lines.push("  "+(i+1)+(r&&"  "+r))}}_appendMatch(e,t,n,r){var o=e.lineAt(t).text,s="  "+(t+1)+": ",a=this._lines.push(s+o),c=new i.Range(a-1,s.length+n.start.character,a-1,s.length+n.end.character),u=r.with({fragment:String(1+n.start.line)});this._links.push(new i.DocumentLink(c,u))}_appendTrailing(e,t,n){var i=Math.min(e.lineCount,t+3);if(!(n&&n.start.line-i<=2)){for(;++t<i;){var r=e.lineAt(t).text;this._lines.push("  "+(t+1)+(r&&"  "+r))}n&&this._lines.push("  ...")}}}},496:e=>{e.exports=require("vscode")}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var o=t[i]={exports:{}};return e[i](o,o.exports,n),o.exports}var i={};(()=>{var e=i;Object.defineProperty(e,"__esModule",{value:!0}),e.deactivate=e.activate=void 0;const t=n(496),r=n(103),o=n(599);function s(){c("toLowerCase")}function a(){c("toUpperCase")}function c(e){const n=t.window.activeTextEditor;if(n){const t=n.document,i=n.selection,r=t.getText(i),o="toLowerCase"===e?r.toLowerCase():r.toUpperCase();n.edit((e=>{e.replace(i,o)}))}}e.activate=function(e){console.log('Congratulations, your extension "groupreferences" is now active!');let n=t.commands.registerCommand("extension.toLowerCase",s),i=t.commands.registerCommand("extension.toUpperCase",a);e.subscriptions.push(n),e.subscriptions.push(i);const c=new r.TreeProvider(!1);t.window.registerTreeDataProvider("sidebar_groupreferences_id1",c);const u=new r.TreeProvider(!0);t.window.registerTreeDataProvider("sidebar_groupreferences_id2",u);var l=t.commands.registerTextEditorCommand("groupreferences.findAllReferences",(function(e){var n=(0,o.encodeLocation)(e.document.uri,e.selection.active),i=(0,o.decodeLocation)(n),r=i[0],s=i[1];return t.commands.executeCommand("workbench.view.extension.sidebar_groupreferences"),t.commands.executeCommand("vscode.executeReferenceProvider",r,s).then((e=>{let n=function(e){let t=[];for(let n=0;n<e.length;n++){const i={loc:e[n],lineText:""};t.push(i)}return t}(e);(function(e){return new Promise(((n,i)=>{let r=0;for(let i=0;i<e.length;i++){let o=e[i],s=o.loc,a=s.uri;t.workspace.openTextDocument(a).then((i=>{o.lineText=i.lineAt(s.range.start.line).text,t.commands.executeCommand("vscode.executeDocumentHighlights",a,s.range.start).then((i=>{let a=i;for(let e=0;e<a.length;e++){const n=a[e];s.range.isEqual(n.range)&&(n.kind===t.DocumentHighlightKind.Write?o.isWrite=!0:n.kind===t.DocumentHighlightKind.Read&&(o.isWrite=!1))}r++,r>=e.length&&n&&n(null)}))}))}}))})(n).then((()=>{c.SetDataSources(n),u.SetDataSources(n)}))}))}));e.subscriptions.push(l)},e.deactivate=function(){}})(),module.exports=i})();